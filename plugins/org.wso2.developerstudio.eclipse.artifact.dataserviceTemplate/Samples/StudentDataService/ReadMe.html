<!DOCTYPE html>
<html>
<title>Students Data Service</title>
<head>
</head>
<body>
<div id="content">
    <h1>Students Data Service</h1>
    <h3>About the Sample</h3>
    <p>
			<span style="font-weight: 400;">This sample demonstrates the
				Demonstrate CRUD operation with data service
				 of the Enterprise Integrator. </span>
    </p>
    <p>
        <span style="font-weight: 400;">This sample creates an </span><strong>DSS
        config project</strong><span style="font-weight: 400;"> that consists
				of an </span><a
            href="https://docs.wso2.com/display/EI630/Generating+a+Data+Service"><span
            style="font-weight: 400;">Data Service</span></a><span style="font-weight: 400;">
				called StudentDataService </span> and a <strong>Composite application project</strong><span
            style="font-weight: 400;"> which is used to package and export the
				 artifacts created within the DSS solution project.</span>
    </p>
    <h3>Next Steps</h3>
    <p>Setup database and insert some bogus records
        <br>
        <br>CREATE TABLE `students` (
        <br> `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
        <br> `name` varchar(50) DEFAULT NULL,
        <br> `school` varchar(50) DEFAULT NULL,
        <br> `grade` varchar(50) DEFAULT NULL,
        <br> PRIMARY KEY (`id`)
        <br>)
        <br>
        <br>INSERT INTO students (name, school, grade) VALUES
        <br>('Tim', 'Summer School', 7),
        <br>('Peter', 'Burnley High School', 10);
        <br>
        <br>Update database URL and credentials in the StudentDataService.dbs file.

    </p>
    <h3>Executing the sample</h3>
    <ol>
        <li><span style="font-weight: 400;"> Configure EI server</span></li>
    </ol>
    <p>
			<span style="font-weight: 400;">Attach an EI server runtime
				into the Developer Studio following the instructions given below (if
				you haven&rsquo;t already done).</span>
    </p>
    <p>
			<span style="font-weight: 400;">Navigate to the Developer
				Studio Dashboard and click </span><strong>Server</strong><span
            style="font-weight: 400;"> under </span><strong>Add Server</strong><span
            style="font-weight: 400;">.</span>
    </p>
    <p>
        <span style="font-weight: 400;">In the &lsquo;</span><strong>Define
        a New Server</strong><span style="font-weight: 400;">&rsquo; dialog
				box, expand the WSO2 folder, and select the respective product and
				version.</span>
    </p>
    <p>
        <span style="font-weight: 400;">Click </span><strong>Next</strong><span
            style="font-weight: 400;">, click </span><strong>Browse</strong><span
            style="font-weight: 400;"> that is next to CARBON_HOME, and
				select the WSO2 EI distribution directory, to define the server
				runtime environment and click </span><strong>Next</strong><span
            style="font-weight: 400;">.</span>
    </p>
    <p>
			<span style="font-weight: 400;">Review the default port
				details for the ESB profile of WSO2 EI. Typically, you can leave
				these unchanged, but if you are already running another server on
				these ports, specify unused ports here. (See </span><a
            href="https://docs.wso2.com/display/ADMIN44x/Default+Ports+of+WSO2+Products"><span
            style="font-weight: 400;">Default Ports of WSO2 Products</span></a><span
            style="font-weight: 400;"> for more information.) Click </span><strong>Next</strong><span
            style="font-weight: 400;">. </span>
    </p>
    <ol start="2">
        <li><span style="font-weight: 400;"> Deploy the CApp
					project.</span></li>
    </ol>
    <p>
			<span style="font-weight: 400;">To deploy the CApp project in
				the ESB server that we just added, select relevant project from the
				list, click </span><strong>Add</strong><span style="font-weight: 400;">
				to move it into the Configured list, and then click </span><strong>Finish</strong><span
            style="font-weight: 400;">.</span>
    </p>
    <p>
        <span style="font-weight: 400;">Please refer to </span><a
            href="https://docs.wso2.com/display/ADMIN44x/Deploying+Composite+Applications+in+the+Server#DeployingCompositeApplicationsintheServer-DeployingusingtheToolinginterface"><span
            style="font-weight: 400;">this resource</span></a><span
            style="font-weight: 400;"> for more information.</span>
    </p>
    <p>
			<span style="font-weight: 400;">The ESB server of WSO2 EI is
				now added inside Eclipse tooling.</span>
    </p>
    <ol start="3">
        <li><span style="font-weight: 400;"> Start the server</span></li>
    </ol>
    <p>
			<span style="font-weight: 400;">You will see that the server
				is currently stopped. Click </span><strong>Play </strong><span
            style="font-weight: 400;">butto</span><strong>n </strong><span
            style="font-weight: 400;">on the toolbar to start the server.
			</span>
    </p>
    <p>
			<span style="font-weight: 400;">If you are prompted to save
				changes to any of the artifact files, click </span><strong>Yes</strong><span
            style="font-weight: 400;">. </span>
    </p>
    <p>
			<span style="font-weight: 400;">As the server starts, the
				Console tab will appear. You should see messages indicating that the
				C-App was successfully deployed. The C-App will now be available in
				the ESB profile's management console (</span><strong>Manage -&gt;
        Carbon Applications -&gt; List</strong><span style="font-weight: 400;">).</span>
    </p>
    <ol start="4">
        <li><span style="font-weight: 400;"> Invoke the service</span></li>
    </ol>
    <p>			<span style="font-weight: 400;">Use an HTTP client like cURL
				to invoke the service.</span>
    </p>
    <h3> Create Students</h3>
    <p>
			<span style="font-weight: 400;">curl -X POST -d @request.xml http://localhost:8280/services/StudentDataService &nbsp;-H "Content-Type: text/xml" -H "SOAPAction: urn:CreateStudents"
</span>
    </p>
    <p>
			<span style="font-weight: 400;">The request.xml can be a file
				which has following content.</span>
    </p>
    <p>

        &lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
        xmlns:dat="http://ws.wso2.org/dataservice"&gt;
    <p> &lt;soapenv:Header/&gt; </p>
    <p> &lt;soapenv:Body&gt;</p>
    <p> &lt;dat:CreateStudents&gt;</p>
    <p> &lt;dat:name&gt;Sam&lt;/dat:name&gt;</p>
    <p> &lt;dat:school&gt;Mary College&lt;/dat:school&gt;</p>
    <p> &lt;dat:grade&gt;8&lt;/dat:grade&gt;</p>
    <p> &lt;/dat:CreateStudents&gt;</p>
    <p> &lt;/soapenv:Body&gt;
        &lt;/soapenv:Envelope&gt;
    </p>

    <h3> Read students</h3>
    <p>
			<span style="font-weight: 400;">curl -X POST -d @request.xml http://localhost:8280/services/StudentDataService &nbsp;-H "Content-Type: text/xml" -H "SOAPAction: urn:ReadStudents"
</span>
    </p>
    <p>
			<span style="font-weight: 400;">The request.xml can be a file
				which has following content.</span>
    </p>
    <p>
        &lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
        xmlns:dat="http://ws.wso2.org/dataservice"&gt;
    <p> &lt;soapenv:Header/&gt; </p>
    <p> &lt;soapenv:Body&gt;</p>
    <p> &lt;dat:ReadStudents/&gt;</p>
    <p> &lt;/soapenv:Body&gt;</p>
    <p>&lt;/soapenv:Envelope&gt;</p>
    </p>
    <h3> Update students</h3>
    <p>
			<span style="font-weight: 400;">curl -X POST -d @request.xml http://localhost:8280/services/StudentDataService &nbsp;-H "Content-Type: text/xml" -H "SOAPAction: urn:UpdateStudents"
</span>
    </p>
    <p>
			<span style="font-weight: 400;">The request.xml can be a file
				which has following content.</span>
    </p>
    <p>
        &lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
        xmlns:dat="http://ws.wso2.org/dataservice"&gt;
    <p> &lt;soapenv:Header/&gt; </p>
    <p>&lt;soapenv:Body&gt;</p>
    <p> &lt;dat:UpdateStudents&gt; </p>
    <p> &lt;dat:name&gt;Sam&lt;/dat:name&gt; </p>
    <p> &lt;dat:school&gt;Mary College&lt;/dat:school&gt; </p>
    <p> &lt;dat:grade&gt;6&lt;/dat:grade&gt;</p>
    <p> &lt;dat:id&gt;3&lt;/dat:id&gt;</p>
    <p> &lt;/dat:UpdateStudents&gt;</p>
    <p>&lt;/soapenv:Body&gt;</p>
    &lt;/soapenv:Envelope&gt;</p>
    </p>
    <h3> Delete students </h3>
    <p>
			<span style="font-weight: 400;">curl -X POST -d @request.xml http://localhost:8280/services/StudentDataService &nbsp;-H "Content-Type: text/xml" -H "SOAPAction: urn:DeleteStudents"
</span>
    </p>
    <p>			<span style="font-weight: 400;">The request.xml can be a file
				which has following content.</span>
    </p>
    <p>
        &lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
        xmlns:dat="http://ws.wso2.org/dataservice"&gt;
    <p> &lt;soapenv:Header/&gt;</p>
    <p> &lt;soapenv:Body&gt;</p>
    <p> &lt;dat:DeleteStudents&gt;</p>
    <p> &lt;dat:id&gt;3&lt;/dat:id&gt; </p>
    <p> &lt;/dat:DeleteStudents&gt; </p>
    <p> &lt;/soapenv:Body&gt; </p>
    &lt;/soapenv:Envelope&gt;
    </p>
</div>
</body>
</html>
